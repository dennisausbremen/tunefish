{% extends "vote_layout/layout_vote.html" %}
{% from "_formhelpers.html" import renderMessages %}

{% block body %}
{{ renderMessages() }}


<section class="main-content profile finish">
    <div class="row">
        <div class="col-xs-12">
            <div class="form-action" id="step-finish">
                <div class="step-content" id="app_container">
                </div>
            </div>
        </div>
    </div>
</section>


{% raw %}
<script type="text/x-handlebars" id="main">
    <div style="position:fixed; top: 50px; right:0; width: 300px; height: 300px; background-color: #f0f0f0; z-index:9001;">
        <h5>hier k√∂nnte ihr audioplayer stehen</h5>

        <audio {{bind-attr src=current.url }} controls></audio>
        {{ current.url }}

        <div id="" style="overflow-y: scroll; height:200px;">
            <ul>
                {{#each track in tracks}}
                <li>{{ track.trackname }} {{ track.band.name }}</li>
                {{/each}}
            </ul>
        </div>

    </div>
    <hr/>
    {{ outlet }}
</script>

<script type="text/x-handlebars" id="bands">
    {{#each band in this }}
    {{#link-to "band" band.id }}
    <div style="width: 200px; height: 200px; background: url('{{ unbound band.thumbnail }}'); display: inline-block; margin: 10px; position: relative;">
        <div style="background-color: rgba(0,0,0, .5); width: 100%; position: absolute; bottom: 0; padding: 5px; text-align: center;">
            {{ band.name }} ( {{ band.ownVote }})
        </div>
    </div>
    {{/link-to}}
    {{/each}}
</script>

<script type="text/x-handlebars" id="band">
    <h2>Band {{ name }} ({{ voteCount }} Votes, {{ voteAverage }})</h2>
    <button
    {{action "vote" 1}}>Vote 1</button>
    <button
    {{action "vote" 2}}>Vote 2</button>
    <button
    {{action "vote" 3}}>Vote 3</button>
    <button
    {{action "vote" 4}}>Vote 4</button>
    <button
    {{action "vote" 5}}>Vote 5</button>
    <table style="width: 100%;">
        <tbody>
        <tr>
            <td>Mitglieder:</td>
            <td>{{ amount_members }}</td>
        </tr>
        <tr>
            <td>Herkunft:</td>
            <td>{{ city }}<br/>
                <img src="http://maps.googleapis.com/maps/api/staticmap?key=AIzaSyDRzrscCqKGd66mLS6jOayfUw9d4SICKOY&markers={{ unbound city_encoded }}&zoom=10&size=600x300&sensor=false"/>
                <button {{ action "calcDistance" }} id="calcDist">Entfernung berechnen</button>
            </td>
        </tr>
        <tr>
            <td>Webseite:</td>
            <td><a {{bind-attr href=website }}>{{ website }}</a>
             {{#if facebookUrl }},
              <a {{ bind-attr href=facebookUrl }}>facebook</a>
              {{/if }}
            </td>
        </tr>
        {{#if youtube_url }}
        <tr>
            <td>YouTube:</td>
            <td>
            <!-- Feel free to use some JS hacks to avoid this iframe, Dennis -->
             <iframe id="ytplayer" type="text/html" width="640" height="390"
                                        {{ bind-attr src=youtubeUrl }}"
                                        frameborder="0"/>
            </td>
        </tr>
        {{/if }}

        <tr>
            <td>Beschreibung:</td>
            <td>{{ descp }}</td>
        </tr>
        </tbody>
    </table>

    <h3>Tracks</h3>
    <ul>
        {{#each track in tracks }}
        <li ><a href="#" {{ action "addTrack" track }}>
            {{ track.trackname }}
            </a>
        </li>
        {{/each}}
    </ul>

    <h3>Bandfoto</h3>
    <img {{bind-attr src=image }} width="100%"/>

    <h3>Kommentare</h3>
    <table style="width: 100%;">
        <tbody>
        {{#each comment in comments }}
        <tr>
            <td>{{ comment.author }} <br> {{ comment.timestamp }}</td>
            <td>{{ comment.message }}</td>
        </tr>
        {{/each}}

        </tbody>
    </table>
    <h3>Dein Kommentar:</h3>
    <form {{action "addComment" on="submit"}}>

        {{ textarea name="comment" value=comment id="new_comment" required="required" }}

        <button type="submit">Add</button>

    </form>

</script>
{% endraw %}


{% endblock %}
